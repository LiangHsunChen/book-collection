(function(){"use strict";var o={578:function(o,t,e){var r=e(2856),n=function(){var o=this,t=o._self._c;return t("div",{attrs:{id:"books-component"}},[t("h1",[o._v("Home Page")]),t("p",[o._v("Welcome to the home page.")]),t("button",{staticClass:"create-button",on:{click:o.redirectToCreateBook}},[o._v(" Insert New Book ")]),o.books.length>0?t("div",{staticClass:"books-table"},[t("table",[t("thead",[t("tr",[t("th",[o._v("Actions")]),o._l(o.books[0],(function(e,r){return t("th",{key:r},[o._v(o._s(r))])}))],2)]),t("tbody",o._l(o.books,(function(e){return t("tr",{key:e.id},[t("td",{staticClass:"action-buttons"},[t("button",{staticClass:"view-button",on:{click:function(t){return o.redirectToViewBook(e.id)}}},[o._v(" Edit/View ")]),t("button",{staticClass:"delete-button",on:{click:function(t){return o.deleteBook(e.id)}}},[o._v(" Delete ")])]),o._l(e,(function(e,r){return t("td",{key:r},[o._v(o._s(e))])}))],2)})),0)])]):t("div",[t("p",[o._v("No books available.")])])])},i=[],a={name:"BooksComponent",data(){return{books:[]}},mounted(){this.fetchBooks()},methods:{fetchBooks(){fetch(window.location.origin+"/coding-challenge/books",{method:"GET"}).then((o=>o.json())).then((o=>{this.books=o})).catch((o=>{console.error("Error fetching books:",o)}))},redirectToCreateBook(){window.location.href=window.location.origin+"/coding-challenge/books/create"},redirectToViewBook(o){window.location.href=window.location.origin+`/coding-challenge/books/view/${o}`},deleteBook(o){confirm("Are you sure you want to delete this book?")&&console.log("Deleting book with ID:",o)}}},s=a,l=e(1656),c=(0,l.A)(s,n,i,!1,null,"e6af76c4",null),u=c.exports,d=function(){var o=this,t=o._self._c;return t("div",{attrs:{id:"create-book-component"}},[t("h1",[o._v("Create a new Book")]),t("p",[o._v("Please fill out the form below to create a new book.")]),t("BookFormComponent",{attrs:{action:o.action,submitForm:o.submitForm}})],1)},h=[],p=function(){var o=this,t=o._self._c;return t("div",{attrs:{id:"book-form-component"}},[t("form",{on:{submit:function(t){return t.preventDefault(),o.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"title"}},[o._v("Title:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.localBook.title,expression:"localBook.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",required:""},domProps:{value:o.localBook.title},on:{input:function(t){t.target.composing||o.$set(o.localBook,"title",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"author"}},[o._v("Author:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.localBook.author,expression:"localBook.author"}],staticClass:"form-control",attrs:{type:"text",id:"author",required:""},domProps:{value:o.localBook.author},on:{input:function(t){t.target.composing||o.$set(o.localBook,"author",t.target.value)}}}),o.authorError?t("small",{staticClass:"error-message"},[o._v(" "+o._s(o.authorError)+" ")]):o._e()]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"genre"}},[o._v("Genre:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.localBook.genre,expression:"localBook.genre"}],staticClass:"form-control",attrs:{type:"text",id:"genre",required:""},domProps:{value:o.localBook.genre},on:{input:function(t){t.target.composing||o.$set(o.localBook,"genre",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"published_year"}},[o._v("Published Year:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:o.localBook.published_year,expression:"localBook.published_year"}],staticClass:"form-control",attrs:{id:"published_year",required:""},on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(o){return o.selected})).map((function(o){var t="_value"in o?o._value:o.value;return t}));o.$set(o.localBook,"published_year",t.target.multiple?e:e[0])}}},o._l(o.years,(function(e){return t("option",{key:e,domProps:{value:e}},[o._v(" "+o._s(e)+" ")])})),0)]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"description"}},[o._v("Description:")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:o.localBook.description,expression:"localBook.description"}],staticClass:"form-control description-textarea",attrs:{id:"description"},domProps:{value:o.localBook.description},on:{input:function(t){t.target.composing||o.$set(o.localBook,"description",t.target.value)}}}),t("br"),o.descriptionError?t("small",{staticClass:"error-message"},[o._v(" "+o._s(o.descriptionError)+" ")]):o._e()]),t("button",{staticClass:"create-button",attrs:{type:"submit"}},[o._v(o._s(o.actionButton))]),o.successMessage?t("div",{staticClass:"success-message"},[o._v(" "+o._s(o.successMessage)+" ")]):o._e()])])},m=[],f=(e(4114),{name:"BookForm",props:{book:{type:Object,default:()=>({title:"",author:"",genre:"",published_year:(new Date).getFullYear(),description:""})},action:String,submitForm:{type:Function,required:!0},getInitialData:Function},data(){return{localBook:{...this.book},years:[],successMessage:"",authorError:"",descriptionError:"",actionButton:""}},created(){this.populateYears(),this.actionButton="create"===this.action?"Create":"update"===this.action?"Update":""},methods:{populateYears(){const o=(new Date).getFullYear();for(let t=o;t>=1900;t--)this.years.push(t)},validateForm(){let o=!0;this.authorError="",this.descriptionError="";const t=/^[a-zA-Z]+\s[a-zA-Z]+$/;return t.test(this.localBook.author)||(this.authorError="Author must contains first name and last name. e,g: John Doe",o=!1),this.localBook.description.length<100&&(this.descriptionError="Description must be at least 100 characters.",o=!1),o},handleSubmit(){this.validateForm()&&this.submitForm(this.localBook).then((o=>{this.resetForm(),this.successMessage=`Book ${o.title} successfully ${this.action}d with id: ${o.id}`})).catch((o=>{console.error(o),alert("An error occurred while submitting the form.")}))},resetForm(){this.getInitialData?this.getInitialData(this.localBook.id).then((o=>{this.localBook={...o}})).catch((o=>{console.error(o),alert("An error occurred while resetting the form.")})):this.localBook={title:"",author:"",genre:"",published_year:(new Date).getFullYear(),description:""}}}}),k=f,b=(0,l.A)(k,p,m,!1,null,"66cd6e6f",null),v=b.exports,g={name:"CreateBookComponent",components:{BookFormComponent:v},data(){return{action:"create"}},methods:{submitForm(o){return fetch(window.location.origin+"/coding-challenge/books/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((o=>o.ok?o.json():o.json().then((o=>{throw new Error(o.error||"Unknown error")})))).then((o=>(console.log("Book created:",o),o))).catch((o=>{console.error("Error creating book:",o)}))}}},w=g,_=(0,l.A)(w,d,h,!1,null,"f4a991b0",null),B=_.exports,y=function(){var o=this,t=o._self._c;return t("div",{attrs:{id:"view-book-component"}},[t("h1",[o._v("Book Details")]),t("p",[o._v(' Update the book details by editing the form below and clicking the "Update" button. ')]),t("BookFormComponent",{attrs:{book:o.book,action:o.action,submitForm:o.submitForm,getInitialData:o.fetchBook}})],1)},C=[],F={name:"ViewBookComponent",components:{BookFormComponent:v},data(){return{action:"update",book:{}}},created(){this.book=window.book},methods:{submitForm(o){return fetch(`${window.location.origin}/coding-challenge/books/${this.book.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((o=>o.ok?o.json():o.json().then((o=>{throw new Error(o.error||"Unknown error")})))).then((o=>(console.log("Book updated:",o),o))).catch((o=>{console.error("Error updating book:",o)}))},fetchBook(o){return fetch(`${window.location.origin}/coding-challenge/books/get_book/${o}`).then((o=>o.ok?o.json():o.json().then((o=>{throw new Error(o.error||"Unknown error")})))).then((o=>(console.log("Book fetched:",o),o))).catch((o=>{console.error("Error fetching book:",o)}))}}},E=F,x=(0,l.A)(E,y,C,!1,null,"6e9b0d7a",null),A=x.exports;r.Ay.config.productionTip=!1,new r.Ay({el:"#books-component",render:o=>o(u)}),new r.Ay({el:"#create-book-component",render:o=>o(B)}),new r.Ay({el:"#view-book-component",render:o=>o(A)})}},t={};function e(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return o[r].call(i.exports,i,i.exports,e),i.exports}e.m=o,function(){var o=[];e.O=function(t,r,n,i){if(!r){var a=1/0;for(u=0;u<o.length;u++){r=o[u][0],n=o[u][1],i=o[u][2];for(var s=!0,l=0;l<r.length;l++)(!1&i||a>=i)&&Object.keys(e.O).every((function(o){return e.O[o](r[l])}))?r.splice(l--,1):(s=!1,i<a&&(a=i));if(s){o.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=o.length;u>0&&o[u-1][2]>i;u--)o[u]=o[u-1];o[u]=[r,n,i]}}(),function(){e.n=function(o){var t=o&&o.__esModule?function(){return o["default"]}:function(){return o};return e.d(t,{a:t}),t}}(),function(){e.d=function(o,t){for(var r in t)e.o(t,r)&&!e.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:t[r]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)}}(),function(){var o={524:0};e.O.j=function(t){return 0===o[t]};var t=function(t,r){var n,i,a=r[0],s=r[1],l=r[2],c=0;if(a.some((function(t){return 0!==o[t]}))){for(n in s)e.o(s,n)&&(e.m[n]=s[n]);if(l)var u=l(e)}for(t&&t(r);c<a.length;c++)i=a[c],e.o(o,i)&&o[i]&&o[i][0](),o[i]=0;return e.O(u)},r=self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=e.O(void 0,[504],(function(){return e(578)}));r=e.O(r)})();
//# sourceMappingURL=app.js.map