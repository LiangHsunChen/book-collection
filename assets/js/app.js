(function(){"use strict";var o={8955:function(o,e,t){var r=t(2856),n=function(){var o=this,e=o._self._c;return e("div",{attrs:{id:"books-component"}},[e("HeaderComponent"),e("div",{staticClass:"container"},[e("h1",[o._v("Home")]),e("button",{staticClass:"create-button",on:{click:o.redirectToCreateBook}},[o._v(" + Create ")]),o.successDeleteMessage?e("div",{staticClass:"success-delete-message"},[o._v(" "+o._s(o.successDeleteMessage)+" ")]):o._e(),o.books.length>0?e("div",{staticClass:"books-table"},[e("table",[e("thead",[e("tr",[e("th",[o._v("Actions")]),o._l(o.books[0],(function(t,r){return e("th",{key:r},[o._v(o._s(r))])}))],2)]),e("tbody",o._l(o.books,(function(t){return e("tr",{key:t.id},[e("td",{staticClass:"action-buttons"},[e("button",{staticClass:"view-button",on:{click:function(e){return o.redirectToViewBook(t.id)}}},[o._v(" Edit/View ")]),e("button",{staticClass:"delete-button",on:{click:function(e){return o.deleteBook(t.id)}}},[o._v(" Delete ")])]),o._l(t,(function(t,r){return e("td",{key:r},[o._v(o._s(t))])}))],2)})),0)])]):e("div",[e("p",[o._v("No books available.")])])])],1)},a=[],i=function(){var o=this,e=o._self._c;return e("header",{attrs:{id:"header-component"}},[e("h1",{staticClass:"title"},[o._v("Books Collection")]),e("nav",{staticClass:"breadcrumb"},[e("a",{staticClass:"breadcrumb-link",on:{click:o.goHome}},[o._v("Home")]),o.currentPage?e("span",{staticClass:"breadcrumb-separator"},[o._v("/")]):o._e(),e("span",{staticClass:"breadcrumb-current"},[o._v(o._s(o.currentPage))])])])},s=[],c={name:"HeaderComponent",props:{currentPage:{type:String,default:""}},methods:{goHome(){window.location.href=window.location.origin+"/coding-challenge"}}},l=c,u=t(1656),d=(0,u.A)(l,i,s,!1,null,"6f826906",null),h=d.exports,p={name:"BooksComponent",components:{HeaderComponent:h},data(){return{books:[],successDeleteMessage:""}},mounted(){this.fetchBooks()},methods:{fetchBooks(){fetch(window.location.origin+"/coding-challenge/books",{method:"GET"}).then((o=>o.json())).then((o=>{this.books=o})).catch((o=>{console.error("Error fetching books:",o)}))},redirectToCreateBook(){window.location.href=window.location.origin+"/coding-challenge/books/create"},redirectToViewBook(o){window.location.href=window.location.origin+`/coding-challenge/books/view/${o}`},deleteBook(o){confirm("Are you sure you want to delete this book?")&&(console.log("Deleting book with ID:",o),fetch(window.location.origin+`/coding-challenge/books/delete/${o}`,{method:"GET"}).then((o=>o.ok?o.json():o.json().then((o=>{throw new Error(o.error||"Unknown error")})))).then((e=>{console.log("Book deleted:",e),this.fetchBooks(),this.successDeleteMessage="Book with ID "+o+" has been deleted."})).catch((o=>{console.error("Error deleting book:",o)})))}}},m=p,k=(0,u.A)(m,n,a,!1,null,"cc350130",null),f=k.exports,g=function(){var o=this,e=o._self._c;return e("div",{attrs:{id:"create-book-component"}},[e("HeaderComponent",{attrs:{currentPage:"Create Book"}}),e("h1",[o._v("Create a new Book")]),e("p",[o._v("Please fill out the form below to create a new book.")]),e("BookFormComponent",{attrs:{action:o.action,submitForm:o.submitForm}})],1)},b=[],v=function(){var o=this,e=o._self._c;return e("div",{attrs:{id:"book-form-component"}},[e("form",{on:{submit:function(e){return e.preventDefault(),o.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[o._v("Title:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:o.localBook.title,expression:"localBook.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",required:""},domProps:{value:o.localBook.title},on:{input:function(e){e.target.composing||o.$set(o.localBook,"title",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"author"}},[o._v("Author:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:o.localBook.author,expression:"localBook.author"}],staticClass:"form-control",attrs:{type:"text",id:"author",required:""},domProps:{value:o.localBook.author},on:{input:function(e){e.target.composing||o.$set(o.localBook,"author",e.target.value)}}}),o.authorError?e("small",{staticClass:"error-message"},[o._v(" "+o._s(o.authorError)+" ")]):o._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"genre"}},[o._v("Genre:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:o.localBook.genre,expression:"localBook.genre"}],staticClass:"form-control",attrs:{type:"text",id:"genre",required:""},domProps:{value:o.localBook.genre},on:{input:function(e){e.target.composing||o.$set(o.localBook,"genre",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"published_year"}},[o._v("Published Year:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:o.localBook.published_year,expression:"localBook.published_year"}],staticClass:"form-control",attrs:{id:"published_year",required:""},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(o){return o.selected})).map((function(o){var e="_value"in o?o._value:o.value;return e}));o.$set(o.localBook,"published_year",e.target.multiple?t:t[0])}}},o._l(o.years,(function(t){return e("option",{key:t,domProps:{value:t}},[o._v(" "+o._s(t)+" ")])})),0)]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[o._v("Description:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:o.localBook.description,expression:"localBook.description"}],staticClass:"form-control description-textarea",attrs:{id:"description"},domProps:{value:o.localBook.description},on:{input:function(e){e.target.composing||o.$set(o.localBook,"description",e.target.value)}}}),e("br"),o.descriptionError?e("small",{staticClass:"error-message"},[o._v(" "+o._s(o.descriptionError)+" ")]):o._e()]),e("button",{staticClass:"create-button",attrs:{type:"submit"}},[o._v(o._s(o.actionButton))]),o.successMessage?e("div",{staticClass:"success-message"},[o._v(" "+o._s(o.successMessage)+" ")]):o._e()])])},w=[],_=(t(4114),{name:"BookForm",props:{book:{type:Object,default:()=>({title:"",author:"",genre:"",published_year:(new Date).getFullYear(),description:""})},action:String,submitForm:{type:Function,required:!0},getInitialData:Function},data(){return{localBook:{...this.book},years:[],successMessage:"",authorError:"",descriptionError:"",actionButton:""}},created(){this.populateYears(),this.actionButton="create"===this.action?"Create":"update"===this.action?"Update":""},methods:{populateYears(){const o=(new Date).getFullYear();for(let e=o;e>=1900;e--)this.years.push(e)},validateForm(){let o=!0;this.authorError="",this.descriptionError="";const e=/^[a-zA-Z]+\s[a-zA-Z]+$/;return e.test(this.localBook.author)||(this.authorError="Author must contains first name and last name. e,g: John Doe",o=!1),this.localBook.description.length<100&&(this.descriptionError="Description must be at least 100 characters.",o=!1),o},handleSubmit(){this.validateForm()&&this.submitForm(this.localBook).then((o=>{this.resetForm(),this.successMessage=`Book ${o.title} successfully ${this.action}d with id: ${o.id}`})).catch((o=>{console.error(o),alert("An error occurred while submitting the form.")}))},resetForm(){this.getInitialData?this.getInitialData(this.localBook.id).then((o=>{this.localBook={...o}})).catch((o=>{console.error(o),alert("An error occurred while resetting the form.")})):this.localBook={title:"",author:"",genre:"",published_year:(new Date).getFullYear(),description:""}}}}),B=_,C=(0,u.A)(B,v,w,!1,null,"37e5e1ac",null),y=C.exports,E={name:"CreateBookComponent",components:{HeaderComponent:h,BookFormComponent:y},data(){return{action:"create"}},methods:{submitForm(o){return fetch(window.location.origin+"/coding-challenge/books/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((o=>o.ok?o.json():o.json().then((o=>{throw new Error(o.error||"Unknown error")})))).then((o=>(console.log("Book created:",o),o))).catch((o=>{console.error("Error creating book:",o)}))}}},F=E,D=(0,u.A)(F,g,b,!1,null,"6fdc199c",null),x=D.exports,j=function(){var o=this,e=o._self._c;return e("div",{attrs:{id:"view-book-component"}},[e("HeaderComponent",{attrs:{currentPage:"Book Details"}}),e("h1",[o._v("Book Details")]),e("p",[o._v(' Update the book details by editing the form below and clicking the "Update" button. ')]),e("BookFormComponent",{attrs:{book:o.book,action:o.action,submitForm:o.submitForm,getInitialData:o.fetchBook}})],1)},A=[],O={name:"ViewBookComponent",components:{HeaderComponent:h,BookFormComponent:y},data(){return{action:"update",book:{}}},created(){this.book=window.book},methods:{submitForm(o){return fetch(`${window.location.origin}/coding-challenge/books/${this.book.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((o=>o.ok?o.json():o.json().then((o=>{throw new Error(o.error||"Unknown error")})))).then((o=>(console.log("Book updated:",o),o))).catch((o=>{console.error("Error updating book:",o)}))},fetchBook(o){return fetch(`${window.location.origin}/coding-challenge/books/get_book/${o}`).then((o=>o.ok?o.json():o.json().then((o=>{throw new Error(o.error||"Unknown error")})))).then((o=>(console.log("Book fetched:",o),o))).catch((o=>{console.error("Error fetching book:",o)}))}}},P=O,$=(0,u.A)(P,j,A,!1,null,"2e976fd0",null),T=$.exports;r.Ay.config.productionTip=!1,new r.Ay({el:"#books-component",render:o=>o(f)}),new r.Ay({el:"#create-book-component",render:o=>o(x)}),new r.Ay({el:"#view-book-component",render:o=>o(T)})}},e={};function t(r){var n=e[r];if(void 0!==n)return n.exports;var a=e[r]={exports:{}};return o[r].call(a.exports,a,a.exports,t),a.exports}t.m=o,function(){var o=[];t.O=function(e,r,n,a){if(!r){var i=1/0;for(u=0;u<o.length;u++){r=o[u][0],n=o[u][1],a=o[u][2];for(var s=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(t.O).every((function(o){return t.O[o](r[c])}))?r.splice(c--,1):(s=!1,a<i&&(i=a));if(s){o.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=o.length;u>0&&o[u-1][2]>a;u--)o[u]=o[u-1];o[u]=[r,n,a]}}(),function(){t.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return t.d(e,{a:e}),e}}(),function(){t.d=function(o,e){for(var r in e)t.o(e,r)&&!t.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:e[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){t.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)}}(),function(){var o={524:0};t.O.j=function(e){return 0===o[e]};var e=function(e,r){var n,a,i=r[0],s=r[1],c=r[2],l=0;if(i.some((function(e){return 0!==o[e]}))){for(n in s)t.o(s,n)&&(t.m[n]=s[n]);if(c)var u=c(t)}for(e&&e(r);l<i.length;l++)a=i[l],t.o(o,a)&&o[a]&&o[a][0](),o[a]=0;return t.O(u)},r=self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=t.O(void 0,[504],(function(){return t(8955)}));r=t.O(r)})();
//# sourceMappingURL=app.js.map